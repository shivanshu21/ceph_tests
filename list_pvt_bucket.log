shivanshu@admin ~/gitcode/ceph_tests: python list_pvt_bucket.py
Making connections...

Creating and populating the bucket for user1...
Creating obj 1
Creating obj 2
Creating obj 3
Creating obj 4
Creating obj 5
Creating obj 6
Creating obj 7
Creating obj 8
Creating obj 9
Creating obj 10

Setting ACL...
Traceback (most recent call last):
    File "list_pvt_bucket.py", line 66, in <module>
    b2 = conn_u2.get_bucket(b1.name);
    File "/usr/lib/python2.7/dist-packages/boto/s3/connection.py", line 431, in get_bucket
bucket.get_all_keys(headers, maxkeys=0)
    File "/usr/lib/python2.7/dist-packages/boto/s3/bucket.py", line 392, in get_all_keys
    '', headers, **params)
    File "/usr/lib/python2.7/dist-packages/boto/s3/bucket.py", line 343, in _get_all
    response.status, response.reason, body)
    boto.exception.S3ResponseError: S3ResponseError: 403 Forbidden
    <?xml version="1.0" encoding="UTF-8"?><Error><Code>AccessDenied</Code></Error>
    shivanshu@admin ~/gitcode/ceph_tests: 


##################################

User under the same tenant

shivanshu@admin ~/gitcode/ceph_tests: python list_pvt_bucket.py
Making connections...

Creating and populating the bucket for user1...
Creating obj 1
Creating obj 2
Creating obj 3
Creating obj 4
Creating obj 5
Creating obj 6
Creating obj 7
Creating obj 8
Creating obj 9
Creating obj 10

Setting ACL...

U2: Name of this bucket is bucket_b
U2: Listing keys from U1 bucket
U1 bucket key: <Key: bucket_b,keynum1>
U1 bucket key: <Key: bucket_b,keynum10>
U1 bucket key: <Key: bucket_b,keynum2>
U1 bucket key: <Key: bucket_b,keynum3>
U1 bucket key: <Key: bucket_b,keynum4>
U1 bucket key: <Key: bucket_b,keynum5>
U1 bucket key: <Key: bucket_b,keynum6>
U1 bucket key: <Key: bucket_b,keynum7>
U1 bucket key: <Key: bucket_b,keynum8>
U1 bucket key: <Key: bucket_b,keynum9>

U2: Attempting to read objects from a private bucket:
Object 1: Contents of object
Object 2: Contents of object
Object 3: Contents of object
Object 4: Contents of object
Object 5: Contents of object
Object 6: Contents of object
Object 7: Contents of object
Object 8: Contents of object
Object 9: Contents of object
Object 10: Contents of object

Cleaning up...

